package dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import Connect.DBConnect;
import model.User;

public class UserDaoImpl implements UserDao {
	DBConnect db = new DBConnect();
	Connection conn = db.getConnection();
	DBConnect db = new DBConnect();

	@Override
	public User get(String username) {
	    User user = null;
	    String sql = "SELECT * FROM Users WHERE username = ?";
	    try (Connection conn = db.getConnection();  // g·ªçi method instance
	         PreparedStatement ps = conn.prepareStatement(sql)) {
	        ps.setString(1, username);
	        try (ResultSet rs = ps.executeQuery()) {
	            if (rs.next()) {
	                user = new User();
	                user.setId(rs.getInt("id"));
	                user.setUserName(rs.getString("username"));
	                user.setPassWord(rs.getString("password"));
	                user.setEmail(rs.getString("email"));
	                user.setFullName(rs.getString("fullname"));
	                user.setAvatar(rs.getString("avatar"));
	                user.setRoleid(rs.getInt("roleid"));
	                user.setPhone(rs.getString("phone"));
	                user.setCreatedDate(rs.getDate("createddate"));
	            }
	        }
	    } catch (Exception e) {
	        e.printStackTrace();
	    }
	    return user;
    }
}
